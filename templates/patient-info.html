<div class="page-header">
  <h1>{{ patient.user.first_name }} {{ patient.user.last_name }}</h1>
</div>

<table class="table table-responsive">
  <tr class="active">
    <td width="120px">Personnummer</td>
    <td>{{ patient.national_identification_number }}</td>
  </tr>
  <tr class="active">
    <td>Alder</td>
    <td>{{ patient.age }} år</td>
  </tr>
  <tr class="active">
    <td>Telefonnummer</td>
    <td>
      {{ patient.phone_number }}
      <i ng-hide="patient.phone_number">Ikke spesifisert</i>
    </td>
  </tr>
  <tr class="active">
    <td>Adresse</td>
    <td>
      <a ng-href="http://maps.google.com/?q={{patient.address}}, {{patient.zip_code}} {{patient.city}}, Norway"
         target="_blank">
        {{ patient.address }}, {{ patient.zip_code }} {{ patient.city }}
      </a>
    </td>
  </tr>
</table>

<h4>Pårørende:</h4>
<div class="panel panel-default" ng-repeat="contact in patient.next_of_kin">
  <div class="panel-body">
    <p ng-show="$index === 0"><span class="glyphicon glyphicon-star"></span> Hovedpårørende:</p>
    <p ng-hide="$index === 0">{{ $index + 1 }}. pårørende:</p>
    <p class="list-group-item-heading">
      <span class="glyphicon glyphicon-user"></span>
      {{ contact.full_name }} <span class="label label-info" ng-show="contact.relation">{{ contact.relation }}</span>
    </p>
    <p class="list-group-item-text" ng-show="contact.phone_number">
      <span class="glyphicon glyphicon-earphone"></span> {{ contact.phone_number }}
    </p>
    <p class="list-group-item-text" ng-show="contact.address">
      <span class="glyphicon glyphicon-map-marker"></span>
      <a ng-href="http://maps.google.com/?q={{contact.address}}" target="_blank">{{ contact.address }}</a>
    </p>
  </div>
</div>

<h4>Varsler:</h4>
<table class="table table-bordered table-striped table-hover table-responsive">
  <tr>
    <th>Tid</th>
    <th>Håndtert</th>
    <th>Endre/håndter</th>
    <th>Notis</th>
  </tr>
  <tr ng-repeat="alarm in alarms">
    <td>{{ alarm.time_created | date : 'dd.MM.yyyy HH:mm' }}</td>
    <td>
      <span ng-if="alarm.is_treated">
        <span class="glyphicon glyphicon-ok iconGreen"></span> Ja
      </span>
      <span ng-if="!alarm.is_treated">
        <span class="glyphicon glyphicon-warning-sign iconRed"></span> Nei
      </span>
    </td>
    <td>
      <button class="btn btn-default" ng-click="open('lg', $index)">
        <span class="glyphicon glyphicon-edit"></span>
        <span ng-if="alarm.is_treated">Endre</span>
        <span ng-if="!alarm.is_treated">Merk som håndtert</span>
      </button>
    </td>
    <td>{{ alarm.treated_text }}</td>
  </tr>
</table>

<div class="panel panel-success">
  <div class="panel-heading">
    <h3 class="panel-title">Motiverende beskjed:</h3>
  </div>
  <div class="panel-body">
    Cardigan Bushwick pickled narwhal heirloom typewriter leggings, readymade mlkshk. Leggings
    crucifix street art, squid raw denim asymmetrical literally sustainable kale chips disrupt
    flexitarian fashion axe Schlitz.
  </div>
</div>

<div class="panel panel-info">
  <div class="panel-heading">
    <h3 class="panel-title">Info til pasienten:</h3>
  </div>
  <div class="panel-body">
    Trust fund kogi readymade cred pickled tousled. Shabby chic bicycle rights chillwave, raw
    denim Shoreditch lomo fap cardigan meggings meh distillery tilde Banksy artisan viral.
  </div>
</div>

<script type="text/ng-template" id="handleAlertModalContent.html">
  <div class="modal-header">
    <h3 class="modal-title">Håndter varsel</h3>
  </div>
  <div class="modal-body">
    <form novalidate role="form">
      <fieldset ng-disabled="posting">
        <table>
          <tr>
            <td>Dato:</td>
            <td>{{alarm.time_created | date : 'dd.MM.yyyy kl. HH:mm'}}</td>
          </tr>
          <tr>
            <td>Type:</td>
            <td>{{getAlertType(alarm.measurement.type)}}</td>
          </tr>
          <tr>
            <td>Verdi:</td>
            <td>{{alarm.measurement.value}}</td>
          </tr>
          <tr>
            <td>Normalverdi:</td>
            <td>{{getNormalValue(alarm.measurement.type, alarm.time_created)}}</td>
          </tr>
          <tr>
            <td>Håndtert:</td>
            <td><input type="checkbox" ng-model="alarm.is_treated"></td>
          </tr>
          <tr>
            <td>Notis:</td>
            <td><textarea rows="6" cols="50" ng-model="alarm.treated_text"></textarea></td>
          </tr>
          <tr>
            <td>Legg inn ny motiverende tekst:</td>
            <td><textarea rows="3" cols="50" ng-model="motivationalText.text"></textarea></td>
          </tr>
          <tr>
            <td>Søkeord:</td>
            <td><input type="text" ng-model="tag.text"></td>
          </tr>
        </table>
      </fieldset>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()">Lagre</button>
    <button class="btn btn-warning" ng-click="cancel()">Avbryt</button>
  </div>
</script>
